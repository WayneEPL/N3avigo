<html>
<head>
  <script src="//cdn.socket.io/socket.io-1.4.5.js"></script>
  <script src="//maps.googleapis.com/maps/api/js?key=AIzaSyBdC-pYJjS-9VwYvqY67tAETLzOQxELZkc"></script>
  <script type="text/javascript" src="main.js"></script>
  <script type="text/javascript" src="jquery.min.js"> </script>
  <script type="text/javascript" src="sjcl.js"> </script>
  <script>
    var map;
    var you;
    var him;
    var himLat;
    var himLng;
    function initialize() {
      var mapProp = {
          center:new google.maps.LatLng(9.960183,76.288134),
          zoom:5,
          mapTypeId:google.maps.MapTypeId.ROADMAP
      };
        map = new google.maps.Map(document.getElementById("googleMap"),mapProp);
        you = new google.maps.Marker({
        map: map,
        position: {lat:0,lng:0},
        title: 'You'
      });
      him = new google.maps.Marker({
        map: map,
        position: {lat:0,lng:0},
        title: 'Him'
      });
    }
    google.maps.event.addDomListener(window, 'load', initialize);
    function resize(){
      var bounds = new google.maps.LatLngBounds();
      bounds.extend(you.getPosition());
      bounds.extend(him.getPosition());
      map.fitBounds(bounds);
    }
    function findMe() {
      navigator.geolocation.getCurrentPosition(function(location) {
        var tyLat = location.coords.latitude;
        var tyLng = location.coords.longitude;
        you.setPosition(new google.maps.LatLng( tyLat,tyLng ));
        him.setPosition(new google.maps.LatLng( himLat,himLng ));
        //console.log(location.coords.accuracy);
      });
    }
    setTimeout(resize, 250);
    setTimeout(findMe, 500);
  </script>
</head>
<body>
  <div id="googleMap" style="width:100%;height:80%;"></div>
  <dir style="height:20%"><textarea id="log"></textarea></dir>
</body>
</html>